!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.mitty=b()}(this,function(){function a(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(a[c],c);else for(var d in a)a.hasOwnProperty(d)&&b(d,a[d])}function b(a,b,c,d){e.push({publisher:a,listener:b,eventName:c,callback:d})}function c(b,c,d,f){var g={},h=[];c&&(g.listener=c),f&&(g.callback=f),d&&(g.eventName=d),b&&(g.publisher=b),a(e,function(b){var c=!0;a(g,function(a,d){b[a]!==d&&(c=!1)}),!c&&h.push(b)}),e=h}function d(b,c,d){a(e,function(a){a.publisher===b&&a.eventName===c&&a.callback.call(a.listener,d)})}var e=[],f={on:function(a,c){return b(this,this,a,c),this},listenTo:function(a,c,d){return b(a,this,c,d),this},off:function(a,b){return c(this,null,a,b),this},stopListening:function(a,b,d){return c(a,this,b,d),this},trigger:function(a,b){return d(this,a,b),this}};return function(b){return a(f,function(a,c){b[a]=c}),b}});