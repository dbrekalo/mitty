!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.mitty=b()}(this,function(){function a(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(a[c],c);else for(var d in a)a.hasOwnProperty(d)&&b(d,a[d])}function b(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function c(a,b,c,d){a._mittyOn=a._mittyOn||[],a._mittyOn.push({listener:b,eventName:c,callback:d})}function d(b,c,d,e){if(b._mittyOn&&b._mittyOn.length){var f={},g=[];c&&(f.listener=c),e&&(f.callback=e),d&&(f.eventName=d),a(b._mittyOn,function(b){var c=!0;a(f,function(a,d){b[a]!==d&&(c=!1)}),!c&&g.push(b)}),b._mittyOn=g}}function e(a,b){if(a._mittyOn)for(var c=0;c<a._mittyOn.length;c++)if(a._mittyOn[c].listener===b)return!0;return!1}function f(c,f,g,h){var i=c._mittyListenTo&&c._mittyListenTo.length>0;f&&i?(d(f,c,g,h),e(f,c)||c._mittyListenTo.splice(b(c._mittyListenTo,f),1)):i&&(a(c._mittyListenTo,function(a){d(a,c)}),c._mittyListenTo=[])}var g={on:function(a,b){return c(this,this,a,b),this},listenTo:function(a,d,e){return c(a,this,d,e),this._mittyListenTo=this._mittyListenTo||[],b(this._mittyListenTo,a)<0&&this._mittyListenTo.push(a),this},off:function(a,b){return d(this,null,a,b),this},stopListening:function(a,b,c){return f(this,a,b,c),this},trigger:function(b,c){return this._mittyOn&&a(this._mittyOn,function(a){a.eventName===b&&a.callback.call(a.listener,c)}),this}};return function(b){return a(g,function(a,c){b[a]=c}),b}});